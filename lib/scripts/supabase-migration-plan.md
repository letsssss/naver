# Supabase 마이그레이션 계획서

## 현재 상황
- Supabase 프로젝트 ID(jdubrjczdyqatspojgu)에 접속이 안 되는 상황 확인
- 기본 Supabase 도메인(supabase.com)에는 접근 가능하지만 프로젝트 도메인에는 접근 불가
- 개발 환경에서는 모의 Supabase 클라이언트와 Prisma 폴백 메커니즘으로 개발 진행 중

## 단계별 마이그레이션 계획

### 1단계: 개발 환경 설정 (완료)
- [x] 모의 Supabase 클라이언트 구현 
- [x] Prisma 폴백 메커니즘 활성화
- [x] 로컬에서의 데이터 처리 안정화

### 2단계: Supabase 프로젝트 설정 확인 (필요)
- [ ] Supabase 대시보드에서 프로젝트 상태 확인
- [ ] 올바른 프로젝트 URL 구조 확인
- [ ] 필요시 새로운 Supabase 프로젝트 생성

### 3단계: 데이터 모델 및 마이그레이션 스크립트 준비 (진행 중)
- [x] Supabase 테이블 생성 SQL 스크립트 작성 (`create-tables.sql`)
- [ ] Prisma에서 Supabase로 데이터 마이그레이션 스크립트 작성
- [ ] Row-Level Security (RLS) 정책 설정 스크립트 작성

### 4단계: 서버 코드 마이그레이션 (진행 중)
- [x] Supabase 클라이언트 래퍼 구현 
- [x] 인증 관련 코드 마이그레이션
- [ ] 프로덕션 환경을 위한 환경 변수 설정

### 5단계: 테스트 및 배포
- [ ] 모든 API 엔드포인트에 대한 Supabase 구현 테스트
- [ ] 개발/테스트/프로덕션 환경 별 설정 분리
- [ ] 테스트 환경에서 성능 및 안정성 검증

## 현재 우선 작업 사항
1. Supabase 프로젝트 접근 문제 해결
   - 프로젝트 상태 확인
   - DNS 설정 및 네트워크 문제 해결
   - 필요시 새 프로젝트 생성

2. 데이터 마이그레이션 스크립트 완성
   - Prisma 데이터를 Supabase로 이전하는 스크립트 작성
   - 데이터 구조 변환 로직 구현

3. 클라이언트 사이드 연동
   - Supabase 클라이언트 API 변경 사항 처리 
   - 모든 API 호출 지점 확인 및 수정

## 주의 사항 및 대안 전략
- Supabase 연결이 계속 문제되는 경우 Firebase 같은 대체 BaaS 서비스 검토
- 당분간 Prisma로 로컬 개발을 계속하고, 프로덕션 환경에서만 Supabase 사용 고려
- Supabase 로컬 에뮬레이터 설정으로 개발 과정에서 일관된 환경 유지 